# üöÄ Proyecto Final - Redes 2

**Stack Profesional de WordPress con Docker Compose**

Implementaci√≥n completa de WordPress utilizando contenedores Docker con arquitectura de microservicios, optimizado para rendimiento y seguridad.

---

## üìã Tabla de Contenidos

- [Descripci√≥n](#-descripci√≥n)
- [Arquitectura](#-arquitectura)
- [Caracter√≠sticas](#-caracter√≠sticas)
- [Requisitos Previos](#-requisitos-previos)
- [Instalaci√≥n y Configuraci√≥n](#-instalaci√≥n-y-configuraci√≥n)
- [Uso](#-uso)
- [Estructura del Proyecto](#-estructura-del-proyecto)
- [Comandos √ötiles](#-comandos-√∫tiles)
- [Troubleshooting](#-troubleshooting)
- [Informaci√≥n Acad√©mica](#-informaci√≥n-acad√©mica)

---

## üìñ Descripci√≥n

Este proyecto implementa un stack completo de WordPress utilizando Docker Compose, dise√±ado con las mejores pr√°cticas de DevOps y arquitectura de contenedores. El sistema utiliza **Nginx** como servidor web y proxy reverso, **PHP-FPM** para procesamiento PHP de alto rendimiento, y **MySQL** como base de datos.

### üéØ Objetivos del Proyecto

- Implementar arquitectura de microservicios con Docker
- Optimizar rendimiento mediante separaci√≥n de responsabilidades
- Aplicar configuraciones de seguridad en entornos containerizados
- Demostrar conocimientos de redes y orquestaci√≥n de contenedores

---

## üèóÔ∏è Arquitectura

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      Internet/Usuario                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚îÇ
                            ‚ñº
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ  Nginx:80     ‚îÇ ‚óÑ‚îÄ‚îÄ Servidor Web
                    ‚îÇ  (Alpine)     ‚îÇ     Proxy Reverso
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     Archivos Est√°ticos
                            ‚îÇ
                            ‚îÇ FastCGI
                            ‚ñº
                ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                ‚îÇ  WordPress:9000       ‚îÇ ‚óÑ‚îÄ‚îÄ PHP-FPM 8.1
                ‚îÇ  (PHP-FPM)            ‚îÇ     Procesamiento
                ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     Din√°mico
                            ‚îÇ
                            ‚îÇ MySQL Protocol
                            ‚ñº
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ  MySQL:3306   ‚îÇ ‚óÑ‚îÄ‚îÄ Base de Datos
                    ‚îÇ  (v8.0)       ‚îÇ     (Red Interna)
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### üîÑ Flujo de Peticiones

1. **Cliente** ‚Üí Solicitud HTTP al puerto 80
2. **Nginx** ‚Üí Recibe petici√≥n:
   - Si es archivo est√°tico (.css, .js, img) ‚Üí Sirve directamente
   - Si es archivo PHP ‚Üí Env√≠a a WordPress v√≠a FastCGI
3. **WordPress (PHP-FPM)** ‚Üí Procesa c√≥digo PHP
4. **MySQL** ‚Üí Consulta/almacena datos si es necesario
5. **Respuesta** ‚Üí Nginx ‚Üí Cliente

---

## ‚ú® Caracter√≠sticas

### üê≥ Contenedores

- **MySQL 8.0**: Base de datos con healthchecks y configuraci√≥n optimizada
- **WordPress 6.4**: PHP-FPM 8.1 para mejor rendimiento
- **Nginx Stable Alpine**: Servidor web ligero y eficiente

### üîí Seguridad

- ‚úÖ MySQL **no expuesto** al host (solo red interna)
- ‚úÖ WordPress **no accesible directamente** (solo v√≠a Nginx)
- ‚úÖ Vol√∫menes en modo **read-only** donde aplica
- ‚úÖ Variables sensibles en archivo `.env` (ignorado por Git)
- ‚úÖ Protecci√≥n de archivos `.htaccess`

### ‚ö° Rendimiento

- ‚úÖ **PHP-FPM 8.1**: 20-30% m√°s r√°pido que Apache
- ‚úÖ **Nginx FastCGI**: Cach√© y optimizaci√≥n de archivos est√°ticos
- ‚úÖ **Healthchecks**: Asegura que servicios est√©n listos antes de iniciar
- ‚úÖ **Vol√∫menes persistentes**: Datos optimizados y separados

### üõ†Ô∏è Configuraci√≥n

- ‚úÖ L√≠mites PHP personalizables (uploads, memoria, timeout)
- ‚úÖ Variables de entorno para configuraci√≥n flexible
- ‚úÖ Charset UTF-8MB4 para soporte completo Unicode
- ‚úÖ Redes Docker aisladas

---

## üìã Requisitos Previos

### Software Necesario

- **Docker Desktop** (v20.10 o superior)
  - [Descargar para Windows](https://www.docker.com/products/docker-desktop/)
- **Docker Compose** (v3.8 o superior - incluido en Docker Desktop)
- **Git** (opcional, para clonar el repositorio)

### Recursos del Sistema

- **RAM**: M√≠nimo 4GB (Recomendado 8GB)
- **Disco**: M√≠nimo 2GB libres
- **Puerto 80**: Debe estar disponible

### Verificar Instalaci√≥n

```powershell
# Verificar versi√≥n de Docker
docker --version

# Verificar versi√≥n de Docker Compose
docker-compose --version

# Verificar que Docker est√° corriendo
docker ps
```

---

## üöÄ Instalaci√≥n y Configuraci√≥n

### 1Ô∏è‚É£ Clonar el Repositorio

```powershell
git clone https://github.com/zak-spec/proyecto-_redes_30-.git
cd proyecto-_redes_30-/docker/compose
```

### 2Ô∏è‚É£ Configurar Variables de Entorno

El archivo `.env` contiene las configuraciones. Valores por defecto:

```env
# Base de Datos
MYSQL_ROOT_PASSWORD=admin
MYSQL_DATABASE=wordpressdb
MYSQL_USER=wpuser
MYSQL_PASSWORD=admin

# WordPress
WORDPRESS_DB_HOST=db:3306
WORDPRESS_DB_USER=wpuser
WORDPRESS_DB_PASSWORD=admin
WORDPRESS_DB_NAME=wordpressdb

# Puertos
NGINX_PORT=80

# Proyecto
COMPOSE_PROJECT_NAME=wordpress-stack
```

**‚ö†Ô∏è Recomendaci√≥n**: Cambia las contrase√±as en producci√≥n.

### 3Ô∏è‚É£ Iniciar el Stack

```powershell
# Iniciar todos los contenedores
docker-compose up -d

# Ver el progreso
docker-compose logs -f
```

### 4Ô∏è‚É£ Verificar Estado

```powershell
# Ver contenedores en ejecuci√≥n
docker-compose ps

# Verificar healthchecks
docker ps
```

### 5Ô∏è‚É£ Acceder a WordPress

Abre tu navegador en: **http://localhost**

Completa la instalaci√≥n de WordPress:
- Selecciona idioma
- Crea usuario administrador
- ¬°Listo! üéâ

---

## üéÆ Uso

### Acceso a la Aplicaci√≥n

- **Frontend WordPress**: http://localhost
- **Panel Admin**: http://localhost/wp-admin

### Gesti√≥n de Contenedores

```powershell
# Detener contenedores (mantiene datos)
docker-compose stop

# Iniciar contenedores detenidos
docker-compose start

# Reiniciar todos los servicios
docker-compose restart

# Detener y eliminar contenedores (mantiene vol√∫menes)
docker-compose down

# Eliminar TODO incluyendo datos (‚ö†Ô∏è CUIDADO)
docker-compose down -v
```

### Ver Logs

```powershell
# Todos los servicios
docker-compose logs -f

# Servicio espec√≠fico
docker-compose logs -f nginx
docker-compose logs -f wordpress
docker-compose logs -f db

# √öltimas 100 l√≠neas
docker-compose logs --tail=100
```

---

## üìÅ Estructura del Proyecto

```
docker/
‚îú‚îÄ‚îÄ compose/
‚îÇ   ‚îú‚îÄ‚îÄ docker-compose.yml       # Configuraci√≥n principal
‚îÇ   ‚îú‚îÄ‚îÄ .env                      # Variables de entorno (NO en Git)
‚îÇ   ‚îú‚îÄ‚îÄ .gitignore               # Archivos ignorados
‚îÇ   ‚îú‚îÄ‚îÄ README.md                # Documentaci√≥n detallada
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ nginx/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ default.conf         # Config Nginx + FastCGI
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ php/
‚îÇ       ‚îî‚îÄ‚îÄ uploads.ini          # L√≠mites PHP personalizados
‚îÇ
‚îî‚îÄ‚îÄ README.md                    # Este archivo
```

---

## üîß Comandos √ötiles

### Backup de Base de Datos

```powershell
# Crear backup
docker exec mysql_db mysqldump -u root -padmin wordpressdb > backup_$(Get-Date -Format "yyyyMMdd_HHmmss").sql

# Restaurar backup
Get-Content backup.sql | docker exec -i mysql_db mysql -u root -padmin wordpressdb
```

### Acceso Directo a Contenedores

```powershell
# Shell en MySQL
docker exec -it mysql_db mysql -u root -padmin

# Shell en WordPress
docker exec -it wordpress_app bash

# Shell en Nginx
docker exec -it nginx_proxy sh
```

### Limpieza del Sistema

```powershell
# Eliminar contenedores no utilizados
docker container prune

# Eliminar im√°genes no utilizadas
docker image prune

# Limpieza completa del sistema
docker system prune -a --volumes
```

### Modificar Configuraci√≥n PHP

Edita `compose/php/uploads.ini` y reinicia:

```powershell
docker-compose restart wordpress
```

---

## üêõ Troubleshooting

### ‚ùå Error: "Puerto 80 ya en uso"

**Soluci√≥n**: Cambia el puerto en `.env`
```env
NGINX_PORT=8080
```
Luego reinicia: `docker-compose up -d`

### ‚ùå WordPress no conecta a MySQL

**Causa**: MySQL no est√° listo

**Soluci√≥n**: 
```powershell
# Ver logs de MySQL
docker-compose logs db

# Verificar healthcheck
docker inspect mysql_db | findstr Health
```

### ‚ùå Error 502 Bad Gateway

**Causa**: WordPress no est√° respondiendo

**Soluci√≥n**:
```powershell
# Ver logs de WordPress
docker-compose logs wordpress

# Reiniciar servicio
docker-compose restart wordpress
```

### ‚ùå Problemas de permisos en archivos

**Soluci√≥n**:
```powershell
docker exec -it wordpress_app chown -R www-data:www-data /var/www/html
```

### ‚ùå "Failed to connect to MySQL"

**Soluci√≥n**: Verifica variables en `.env`
```env
WORDPRESS_DB_HOST=db:3306
WORDPRESS_DB_USER=wpuser
WORDPRESS_DB_PASSWORD=admin
WORDPRESS_DB_NAME=wordpressdb
```

---

## üìä Informaci√≥n Acad√©mica

### üéì Datos del Proyecto

- **Instituci√≥n**: Universidad [Tu Universidad]
- **Carrera**: Ingenier√≠a de Sistemas
- **Curso**: Redes 2
- **Semestre**: 8vo
- **Proyecto**: Implementaci√≥n de Stack WordPress con Docker
- **Repositorio**: [proyecto-_redes_30-](https://github.com/zak-spec/proyecto-_redes_30-)

### üìö Conceptos Aplicados

- Contenedores Docker y orquestaci√≥n
- Redes virtuales y aislamiento
- Proxy reverso y FastCGI
- Healthchecks y dependencias entre servicios
- Vol√∫menes persistentes
- Variables de entorno
- Arquitectura de microservicios

### üéØ Objetivos de Aprendizaje Cumplidos

- ‚úÖ Implementaci√≥n de stack LEMP (Linux, Nginx, MySQL, PHP)
- ‚úÖ Orquestaci√≥n de contenedores con Docker Compose
- ‚úÖ Configuraci√≥n de redes Docker
- ‚úÖ Gesti√≥n de vol√∫menes persistentes
- ‚úÖ Aplicaci√≥n de pr√°cticas de seguridad
- ‚úÖ Optimizaci√≥n de rendimiento

---

## üìù Notas Importantes

- üìå Los datos persisten en vol√∫menes Docker incluso si eliminas contenedores
- üìå El archivo `.env` contiene informaci√≥n sensible - **NO** subir a Git
- üìå Para producci√≥n, usar contrase√±as seguras y certificados SSL
- üìå Los healthchecks aseguran inicio correcto de servicios
- üìå Nginx sirve archivos est√°ticos directamente para mejor rendimiento

---

## ü§ù Contribuciones

Este es un proyecto acad√©mico. Sugerencias y mejoras son bienvenidas.

---

## üìÑ Licencia

Proyecto educativo - Uso libre para fines acad√©micos

---

## üìß Contacto

**Autor**: [Tu Nombre]  
**GitHub**: [@zak-spec](https://github.com/zak-spec)  
**Proyecto**: [proyecto-_redes_30-](https://github.com/zak-spec/proyecto-_redes_30-)

---

## üåü Recursos Adicionales

- [Documentaci√≥n Docker](https://docs.docker.com/)
- [Docker Compose Reference](https://docs.docker.com/compose/compose-file/)
- [WordPress Docker Hub](https://hub.docker.com/_/wordpress)
- [MySQL Docker Hub](https://hub.docker.com/_/mysql)
- [Nginx Docker Hub](https://hub.docker.com/_/nginx)

---

**‚≠ê Si este proyecto te fue √∫til, no olvides darle una estrella en GitHub!**

---

*√öltima actualizaci√≥n: Octubre 2025*
